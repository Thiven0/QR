{
  "info": {
    "name": "QR Backend API",
    "_postman_id": "22f1ee3f-e3a5-4bab-8fe4-7a0f69d76a0e",
    "description": "Colección de endpoints del backend del sistema QR.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://services-virid-three.vercel.app",
      "type": "string",
      "description": "URL del backend desplegado. Para pruebas locales usar http://localhost:3000."
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"usuario@ejemplo.com\",\n  \"password\": \"secreto\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            },
            "description": "Autentica a un usuario y devuelve el token de sesión."
          }
        },
        {
          "name": "Issue Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"access_key\": \"accessKey123\",\n  \"secret_key\": \"secretKey123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/token",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "token"
              ]
            },
            "description": "Genera un token de servicio utilizando las llaves configuradas."
          }
        },
        {
          "name": "Profile",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/profile",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "profile"
              ]
            },
            "description": "Obtiene la información del usuario autenticado."
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Create User",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Nombre\",\n  \"apellido\": \"Apellido\",\n  \"email\": \"usuario@ejemplo.com\",\n  \"password\": \"secreto\",\n  \"cedula\": \"1234567890\",\n  \"permisoSistema\": \"Usuario\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users"
              ]
            },
            "description": "Crea un nuevo usuario."
          }
        },
        {
          "name": "List Users",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users"
              ]
            },
            "description": "Obtiene el listado de usuarios."
          }
        },
        {
          "name": "Update User",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Nombre actualizado\",\n  \"estado\": \"activo\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "description": "Identificador del usuario",
                  "value": ""
                }
              ]
            },
            "description": "Actualiza los datos de un usuario existente."
          }
        },
        {
          "name": "Delete User",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "description": "Identificador del usuario",
                  "value": ""
                }
              ]
            },
            "description": "Elimina un usuario."
          }
        },
        {
          "name": "Toggle Access by Cedula",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cedula\": \"1234567890\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/toggle-access",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "toggle-access"
              ]
            },
            "description": "Activa o inactiva a un usuario utilizando su cédula."
          }
        },
        {
          "name": "Parse Scan",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rawText\": \"Nombre\\n1234567890\\nPrograma\\nO+\\n3001234567\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/parse-scan",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "parse-scan"
              ]
            },
            "description": "Procesa texto escaneado para prellenar datos de usuario."
          }
        },
        {
          "name": "Validate Scan",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cedula\": \"1234567890\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/validate-scan",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "validate-scan"
              ]
            },
            "description": "Valida la información de un usuario proveniente del escaneo."
          }
        },
        {
          "name": "List Vehicles by User",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/:userId/vehicles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                ":userId",
                "vehicles"
              ],
              "variable": [
                {
                  "key": "userId",
                  "description": "Identificador del usuario",
                  "value": ""
                }
              ]
            },
            "description": "Obtiene los vehículos asociados a un usuario."
          }
        }
      ]
    },
    {
      "name": "Entry & Exit",
      "item": [
        {
          "name": "Create Registro",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"usuario\": \"<id_usuario>\",\n  \"tipo\": \"entrada\",\n  \"observaciones\": \"\",\n  \"detalles\": {}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/exitEntry",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "exitEntry"
              ]
            },
            "description": "Registra una entrada o salida manualmente."
          }
        },
        {
          "name": "List Registros",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/exitEntry",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "exitEntry"
              ]
            },
            "description": "Obtiene todos los registros de entrada y salida."
          }
        },
        {
          "name": "Get Registro by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/exitEntry/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "exitEntry",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "description": "Identificador del registro",
                  "value": ""
                }
              ]
            },
            "description": "Obtiene un registro específico."
          }
        },
        {
          "name": "Update Registro",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tipo\": \"salida\",\n  \"observaciones\": \"Actualización de datos\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/exitEntry/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "exitEntry",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "description": "Identificador del registro",
                  "value": ""
                }
              ]
            },
            "description": "Actualiza un registro existente."
          }
        },
        {
          "name": "Delete Registro",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/exitEntry/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "exitEntry",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "description": "Identificador del registro",
                  "value": ""
                }
              ]
            },
            "description": "Elimina un registro."
          }
        },
        {
          "name": "Create Registro From Scan",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"qrData\": \"contenido del código QR\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/exitEntry/from-scan",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "exitEntry",
                "from-scan"
              ]
            },
            "description": "Crea un registro a partir de un escaneo de QR."
          }
        },
        {
          "name": "Reset Scan Data",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cedula\": \"1234567890\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/exitEntry/reset-scan",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "exitEntry",
                "reset-scan"
              ]
            },
            "description": "Reinicia el estado de un escaneo para permitir un nuevo registro."
          }
        }
      ]
    },
    {
      "name": "Visitors",
      "item": [
        {
          "name": "Register Visitor",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Visitante\",\n  \"cedula\": \"987654321\",\n  \"correo\": \"visitante@ejemplo.com\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/visitors/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "visitors",
                "register"
              ]
            },
            "description": "Registra a un visitante y genera su ticket temporal."
          }
        },
        {
          "name": "Expire Visitor Session",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"visitorId\": \"<id_visitante>\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/visitors/expire",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "visitors",
                "expire"
              ]
            },
            "description": "Marca el ticket de un visitante como expirado."
          }
        },
        {
          "name": "Reactivate Visitor Ticket",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"visitorId\": \"<id_visitante>\",\n  \"nuevaFechaExpiracion\": \"2024-12-31T23:59:59.000Z\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/visitors/reactivate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "visitors",
                "reactivate"
              ]
            },
            "description": "Reactiva un ticket temporal de visitante."
          }
        }
      ]
    },
    {
      "name": "Vehicles",
      "item": [
        {
          "name": "Create Vehicle",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"usuarioId\": \"<id_usuario>\",\n  \"placa\": \"ABC123\",\n  \"tipo\": \"Carro\",\n  \"marca\": \"Marca\",\n  \"modelo\": \"Modelo\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/vehicles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "vehicles"
              ]
            },
            "description": "Registra un vehículo para un usuario."
          }
        },
        {
          "name": "List Vehicles",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/vehicles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "vehicles"
              ]
            },
            "description": "Obtiene todos los vehículos registrados."
          }
        },
        {
          "name": "Get Vehicle",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/vehicles/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "vehicles",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "description": "Identificador del vehículo",
                  "value": ""
                }
              ]
            },
            "description": "Obtiene un vehículo específico."
          }
        },
        {
          "name": "Update Vehicle",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"marca\": \"Marca actualizada\",\n  \"modelo\": \"Modelo actualizado\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/vehicles/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "vehicles",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "description": "Identificador del vehículo",
                  "value": ""
                }
              ]
            },
            "description": "Actualiza la información de un vehículo."
          }
        },
        {
          "name": "Delete Vehicle",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/vehicles/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "vehicles",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "description": "Identificador del vehículo",
                  "value": ""
                }
              ]
            },
            "description": "Elimina un vehículo."
          }
        },
        {
          "name": "Toggle Vehicle Status",
          "request": {
            "auth": {
              "type": "inherit"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"estado\": \"activo\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/vehicles/:id/toggle-status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "vehicles",
                ":id",
                "toggle-status"
              ],
              "variable": [
                {
                  "key": "id",
                  "description": "Identificador del vehículo",
                  "value": ""
                }
              ]
            },
            "description": "Alterna el estado (activo/inactivo) de un vehículo."
          }
        }
      ]
    },
    {
      "name": "Misc",
      "item": [
        {
          "name": "Ruta de Prueba",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/ruta-prueba",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "ruta-prueba"
              ]
            },
            "description": "Endpoint de prueba definido en la aplicación."
          }
        }
      ]
    }
  ]
}
